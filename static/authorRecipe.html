{% extends "base.html" %}
{% block title %} Профиль {% if  author.first_name and author.last_name %}{{ author.first_name }} {{ author.last_name }}{% else %}
                    {{ author.username }}{% endif %} {% endblock %}
{% block content %}
    {% load static %}

    <main class="main container">
        <div class="main__header">
            <h1 class="main__title">
                {% if  author.first_name and author.last_name %}{{ author.first_name }} {{ author.last_name }}{% else %}
                    {{ author.username }}{% endif %}</h1>

            {% include 'tags.html' %}

        </div>

        <!--        <p style="padding: 0 0 2em 0;"><a class="button button_style_light-blue" href="#">Подписаться на автора</a></p>-->

        <div class="author-subscribe" data-author="{{ author.id }}" >
        {% if request.user != author %}
            <p style="padding: 0 0 2em 0;">
            {% if subscribed %}
            <button class="button button_style_light-blue button_size_subscribe button_style_blue" name="subscribe">Отписаться от автора</button>

            {% else %}
                <button class="button button_style_light-blue button_size_subscribe" name="subscribe" data-out>
                    Подписаться на автора
                </button>

                {% endif %}
            </p>
        {% endif %}
        </div>
        {% if no_tags %}
            <h2 class="main__title">Выберите категорию, либо по запрошенной категории нет рецептов.</h2>
            {% endif %}
        <div class="card-list">
            {% for recipe in page %}
                {% include 'card.html' %}
            {% endfor %}


        </div>

        {% if page.has_other_pages %}
            {% include "paginator.html" with items=page paginator=paginator %}
        {% endif %}


        {% csrf_token %}
        <script>
            const csrftoken = document.querySelector('[name=csrfmiddlewaretoken]').value;
        </script>
        <script src="{% static 'js/components/MainCards.js' %}"></script>
        <script src="{% static 'js/components/Purchases.js' %}"></script>
        <script src="{% static 'js/components/Favorites.js' %}"></script>

        <script src="{% static 'js/config/config.js' %}"></script>
        <script src="{% static 'js/components/CardList.js' %}"></script>
        <script src="{% static 'js/components/Header.js' %}"></script>

        <script src="{% static 'js/api/Api.js' %}"></script>
        <script src="{% static 'js/components/Subscribe.js' %}"></script>
        <script src="{% static 'js/components/AuthorRecipe.js' %}"></script>


        <script src="{% static 'authorRecipe.js' %}"></script>

{% endblock %}